package systemcontract

import (
	"github.com/ethereum/go-ethereum/common"
	"github.com/ethereum/go-ethereum/contracts/system"
	"github.com/ethereum/go-ethereum/core"
	"github.com/ethereum/go-ethereum/core/state"
	"github.com/ethereum/go-ethereum/core/types"
	"github.com/ethereum/go-ethereum/log"
	"github.com/ethereum/go-ethereum/params"
)

const stakingV1Code = "0x608060405260043610620004375760003560e01c80637977f9811162000233578063cfe9f8ec116200012f578063e0d8ea5311620000b9578063f0f2e5521162000084578063f0f2e5521462000c8b578063f28e5f6114620007c2578063f3dc92831462000cbf578063f3ec22911462000cd7578063f851a4401462000cfc57600080fd5b8063e0d8ea531462000c1f578063e818ef861462000c36578063ec2801f91462000c5b578063f08b92841462000c7357600080fd5b8063d3af050511620000fa578063d3af05051462000b6a578063da60db131462000b82578063da71584b1462000b99578063de6746a51462000bbe57600080fd5b8063cfe9f8ec1462000ae3578063d27109091462000b17578063d2957b2f1462000b2e578063d2a71d351462000b4557600080fd5b80639cc02c3011620001bd578063b8d08db21162000188578063b8d08db21462000a48578063b9373707146200091c578063c086559e1462000a60578063c2c0bfe41462000a85578063c967f90f1462000ab957600080fd5b80639cc02c3014620009c05780639de7025814620009d7578063a967e66014620009fe578063aa5c9afd1462000a2357600080fd5b80638f28397011620001fe5780638f283970146200093857806393ef357a146200095d57806398c2199d14620009755780639bde74a8146200098c57600080fd5b80637977f98114620008b55780637bd8d00c14620008d2578063820013c214620008f7578063820805af146200091c57600080fd5b80633488641b11620003435780635a65101911620002cd57806364252643116200029857806364252643146200082e578063692aa97e14620008385780636936c70d14620008545780636be9dcce146200087957806370a996a9146200089e57600080fd5b80635a65101914620007c25780635bcee38214620007d95780635e81f1f814620007fe57806363ef1627146200081657600080fd5b80634d0859cc116200030e5780634d0859cc14620007485780634eb4d1ba146200076d5780634f586573146200079257806358f9194314620007aa57600080fd5b80633488641b14620006bf5780634670ceaf14620006d7578063476776d414620006fc5780634b0b32c5146200071457600080fd5b806315dd2d5511620003c55780632678224711620003905780632678224714620005e55780632693ee8014620006075780632c51c34a146200062957806332f3c17f146200068557600080fd5b806315dd2d55146200057657806315de360e146200059b5780631927207f14620005b4578063213a489414620005cc57600080fd5b80630e18b68111620004065780630e18b68114620004f857806310767904146200051057806314d140b01462000527578063158ef93e146200054957600080fd5b806301036cae146200043c578063023455651462000463578063073d2eb4146200048d5780630cd2c6fa14620004a5575b600080fd5b3480156200044957600080fd5b50620004616200045b366004620050c3565b62000d23565b005b3480156200047057600080fd5b506200047a603081565b6040519081526020015b60405180910390f35b3480156200049a57600080fd5b506200047a60125481565b348015620004b257600080fd5b50620004df620004c436600462004ddd565b6009602052600090815260409020546001600160a01b031681565b6040516001600160a01b03909116815260200162000484565b3480156200050557600080fd5b506200046162000e2e565b620004616200052136600462004ddd565b62000ee5565b3480156200053457600080fd5b50601c54620004df906001600160a01b031681565b3480156200055657600080fd5b50600054620005659060ff1681565b604051901515815260200162000484565b3480156200058357600080fd5b50620004616200059536600462004ddd565b6200102d565b348015620005a857600080fd5b506200047a6201518081565b348015620005c157600080fd5b506200047a6103e881565b348015620005d957600080fd5b506200047a621baf8081565b348015620005f257600080fd5b50600154620004df906001600160a01b031681565b3480156200061457600080fd5b50601b54620004df906001600160a01b031681565b3480156200063657600080fd5b50620006696200064836600462004ddd565b600a6020526000908152604090208054600182015460029092015490919083565b6040805193845260208401929092529082015260600162000484565b3480156200069257600080fd5b506200047a620006a436600462004ddd565b6001600160a01b03166000908152601d602052604090205490565b348015620006cc57600080fd5b506200047a60115481565b348015620006e457600080fd5b5062000461620006f636600462004f3e565b620010d7565b3480156200070957600080fd5b5062000461620012ad565b3480156200072157600080fd5b506200056562000733366004620050aa565b6000908152601f602052604090205460ff1690565b3480156200075557600080fd5b506200047a6200076736600462004e1b565b62001355565b3480156200077a57600080fd5b50620004616200078c36600462004ddd565b6200136e565b3480156200079f57600080fd5b506200047a60135481565b348015620007b757600080fd5b5062000565620014c2565b348015620007cf57600080fd5b506200047a600181565b348015620007e657600080fd5b5062000461620007f836600462004fd5565b620014fb565b3480156200080b57600080fd5b506200046162001661565b3480156200082357600080fd5b506200047a60055481565b62000461620019bf565b3480156200084557600080fd5b50600354620005659060ff1681565b3480156200086157600080fd5b50620004616200087336600462004f10565b62001bbf565b3480156200088657600080fd5b506200047a6200089836600462004e1b565b62001d3a565b62000461620008af36600462004ddd565b62001d4a565b348015620008c257600080fd5b506200047a665543df729c000081565b348015620008df57600080fd5b5062000461620008f136600462004ddd565b62001d98565b3480156200090457600080fd5b50620004df62000916366004620050aa565b62001eda565b3480156200092957600080fd5b506200047a652d79883d200081565b3480156200094557600080fd5b50620004616200095736600462004ddd565b62001f05565b3480156200096a57600080fd5b506200047a60145481565b3480156200098257600080fd5b506200047a600a81565b3480156200099957600080fd5b5062000565620009ab366004620050aa565b60196020526000908152604090205460ff1681565b348015620009cd57600080fd5b506008546200047a565b348015620009e457600080fd5b50620009ef62001f81565b60405162000484919062005200565b34801562000a0b57600080fd5b506200046162000a1d36600462004eaf565b62001fe5565b34801562000a3057600080fd5b50620004df62000a42366004620050aa565b62002324565b34801562000a5557600080fd5b506200047a60065481565b34801562000a6d57600080fd5b50620009ef62000a7f36600462005172565b62002335565b34801562000a9257600080fd5b506200056562000aa4366004620050aa565b60186020526000908152604090205460ff1681565b34801562000ac657600080fd5b5062000ad0601581565b60405160ff909116815260200162000484565b34801562000af057600080fd5b506200056562000b02366004620050aa565b601f6020526000908152604090205460ff1681565b6200046162000b2836600462004e58565b620024cf565b34801562000b3b57600080fd5b506200047a600281565b34801562000b5257600080fd5b506200046162000b6436600462004ddd565b62002884565b34801562000b7757600080fd5b506200047a60105481565b34801562000b8f57600080fd5b506200047a605081565b34801562000ba657600080fd5b506200046162000bb836600462004f10565b620028cd565b34801562000bcb57600080fd5b5062000c0162000bdd36600462004ddd565b600b6020526000908152604090208054600182015460029092015490919060ff1683565b60408051938452602084019290925215159082015260600162000484565b34801562000c2c57600080fd5b50601e546200047a565b34801562000c4357600080fd5b506200046162000c5536600462004ddd565b62002921565b34801562000c6857600080fd5b506200047a60155481565b34801562000c8057600080fd5b506200047a60165481565b34801562000c9857600080fd5b506200056562000caa366004620050aa565b601a6020526000908152604090205460ff1681565b34801562000ccc57600080fd5b506200047a60045481565b34801562000ce457600080fd5b506200046162000cf6366004620050aa565b62002b8b565b34801562000d0957600080fd5b50600054620004df9061010090046001600160a01b031681565b33411462000d4e5760405162461bcd60e51b815260040162000d459062005319565b60405180910390fd5b6001600160a01b0380821660009081526009602052604090205482911662000d8a5760405162461bcd60e51b815260040162000d4590620052fc565b6000838152601f6020526040902054839060ff161562000dbe5760405162461bcd60e51b815260040162000d4590620052a5565b6000848152601f60205260409020805460ff1916600117905562000de483600a62002cbd565b826001600160a01b03167fda5de20b8278e154fa3f60bbee4cf3f2f8b00c704fcc1042929f222d499a24944260405162000e2091815260200190565b60405180910390a250505050565b6001546001600160a01b0316331462000e705760405162461bcd60e51b815260206004820152600360248201526245303360e81b604482015260640162000d45565b600154600080546040516001600160a01b0393841693610100909204909116917f7e644d79422f17c01e4894b5f4f588d331ebfa28653d42ae832dc59e38c9798f91a36001805460008054610100600160a81b0319166101006001600160a01b038416021790556001600160a01b0319169055565b6001600160a01b038082166000908152600960205260409020548291168062000f225760405162461bcd60e51b815260040162000d4590620052fc565b336001600160a01b0316816001600160a01b031663481c6a756040518163ffffffff1660e01b815260040160206040518083038186803b15801562000f6657600080fd5b505afa15801562000f7b573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019062000fa1919062004dfc565b6001600160a01b03161462000fca5760405162461bcd60e51b815260040162000d4590620052df565b6001600160a01b0383166000908152600b602052604090206002015460ff16158062000ffb575062000ffb620014c2565b6200101a5760405162461bcd60e51b815260040162000d4590620052c2565b620010288384600162002e53565b505050565b6001600160a01b03808216600090815260096020526040902054829116620010695760405162461bcd60e51b815260040162000d4590620052fc565b600280541415620010bd5760405162461bcd60e51b815260206004820152601f60248201527f5265656e7472616e637947756172643a207265656e7472616e742063616c6c00604482015260640162000d45565b60028055620010ce826000620030fe565b50506001600255565b60005460ff1615620011125760405162461bcd60e51b815260206004820152600360248201526245343160e81b604482015260640162000d45565b6000805460ff191660011790556001600160a01b038a166200115d5760405162461bcd60e51b815260206004820152600360248201526245303960e81b604482015260640162000d45565b87158015906200116c57508615155b806200118057508715801562001180575086155b620011b45760405162461bcd60e51b815260206004820152600360248201526204531360ec1b604482015260640162000d45565b854711620011eb5760405162461bcd60e51b815260206004820152600360248201526245313160e81b604482015260640162000d45565b600084118015620011fc5750600083115b620012305760405162461bcd60e51b815260206004820152600360248201526222989960e91b604482015260640162000d45565b60008054610100600160a81b0319166101006001600160a01b038d16021790556200125c894262005353565b600455600597909755600695909555601493909355601191909155601655601555601b80546001600160a01b039384166001600160a01b031991821617909155601c80549290931691161790555050565b60005461010090046001600160a01b03163314620012df5760405162461bcd60e51b815260040162000d4590620052df565b60035460ff16156200131a5760405162461bcd60e51b815260206004820152600360248201526222989b60e91b604482015260640162000d45565b6003805460ff191660019081179091556040517fdd288448284e1ccc5e28842bad7eb5c8cfa9587059e1642595fa8666246957a990600090a2565b6000620013658383600162003371565b90505b92915050565b6001600160a01b0380821660009081526009602052604090205482911680620013ab5760405162461bcd60e51b815260040162000d4590620052fc565b336001600160a01b0316816001600160a01b031663481c6a756040518163ffffffff1660e01b815260040160206040518083038186803b158015620013ef57600080fd5b505afa15801562001404573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906200142a919062004dfc565b6001600160a01b031614620014535760405162461bcd60e51b815260040162000d4590620052df565b600280541415620014a75760405162461bcd60e51b815260206004820152601f60248201527f5265656e7472616e637947756172643a207265656e7472616e742063616c6c00604482015260640162000d45565b60028055620014b8836001620030fe565b5050600160025550565b60006004544210158015620014f65750600654600554620014e4919062005385565b600454620014f39042620053a7565b10155b905090565b3341146200151d5760405162461bcd60e51b815260040162000d459062005319565b436000908152601760209081526040808320600180855292529091205460ff16156200155d5760405162461bcd60e51b815260040162000d4590620052a5565b4360009081526017602052604081206001918360048111156200159057634e487b7160e01b600052602160045260246000fd5b6004811115620015b057634e487b7160e01b600052602160045260246000fd5b81526020810191909152604001600020805460ff1916911515919091179055601654620015de90436200543c565b15620016135760405162461bcd60e51b815260206004820152600360248201526245313760e81b604482015260640162000d45565b60008251116200164c5760405162461bcd60e51b815260206004820152600360248201526208a62760eb1b604482015260640162000d45565b81516200102890600790602085019062004d1b565b334114620016835760405162461bcd60e51b815260040162000d459062005319565b6016546200169290436200543c565b15620016c75760405162461bcd60e51b815260206004820152600360248201526245313760e81b604482015260640162000d45565b436000908152601760209081526040808320600480855292529091205460ff1615620017075760405162461bcd60e51b815260040162000d4590620052a5565b4360009081526017602052604081206001918360048111156200173a57634e487b7160e01b600052602160045260246000fd5b60048111156200175a57634e487b7160e01b600052602160045260246000fd5b81526020810191909152604001600020805460ff1916911515919091179055601e54620017845750565b601e54805b801562001990576000601e620017a1600184620053a7565b81548110620017c057634e487b7160e01b600052603260045260246000fd5b60009182526020808320909101546001600160a01b0316808352601d9091526040909120549091506002101562001828576001600160a01b0381166000908152601d602052604081208054600292906200181c908490620053a7565b909155506200197a9050565b828214620018fa576000601e62001841600186620053a7565b815481106200186057634e487b7160e01b600052603260045260246000fd5b6000918252602090912001546001600160a01b0316905080601e62001887600186620053a7565b81548110620018a657634e487b7160e01b600052603260045260246000fd5b600091825260209091200180546001600160a01b0319166001600160a01b0392909216919091179055620018dc600184620053a7565b6001600160a01b039091166000908152601d60205260409020600101555b601e8054806200191a57634e487b7160e01b600052603160045260246000fd5b60008281526020808220830160001990810180546001600160a01b03191690559092019092556001600160a01b0383168252601d905260408120818155600181810192909255600201805460ff19169055620019779084620053a7565b92505b50806200198781620053c1565b91505062001789565b506040517f181d51be54e8e8eaca6eae0eab32d4162099236bd519e7238d015d0870db464190600090a1505b50565b334114620019e15760405162461bcd60e51b815260040162000d459062005319565b43600090815260176020908152604080832083805290915281205460ff161562001a1f5760405162461bcd60e51b815260040162000d4590620052a5565b43600090815260176020526040812060019183600481111562001a5257634e487b7160e01b600052602160045260246000fd5b600481111562001a7257634e487b7160e01b600052602160045260246000fd5b81526020810191909152604001600020805460ff19169115159190911790553415620019bc57600754600062001ab98262001ab260648134605062003548565b90620035ab565b9050600062001ac9838362005385565b62001ad59034620053a7565b905060005b8381101562001ba0576000600960006007848154811062001b0b57634e487b7160e01b600052603260045260246000fd5b60009182526020808320909101546001600160a01b039081168452908301939093526040918201812054825163e18b7fcf60e01b8152925193169350839263e18b7fcf928892600480830193919282900301818588803b15801562001b6f57600080fd5b505af115801562001b84573d6000803e3d6000fd5b505050505050808062001b9790620053fb565b91505062001ada565b50601c5462001bb9906001600160a01b031682620035d5565b50505050565b6001600160a01b038083166000908152600960205260409020548391168062001bfc5760405162461bcd60e51b815260040162000d4590620052fc565b336001600160a01b0316816001600160a01b031663481c6a756040518163ffffffff1660e01b815260040160206040518083038186803b15801562001c4057600080fd5b505afa15801562001c55573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019062001c7b919062004dfc565b6001600160a01b03161462001ca45760405162461bcd60e51b815260040162000d4590620052df565b6001600160a01b0384166000908152600b602090815260408083208151606081018352815481526001820154938101939093526002015460ff161515908201529062001cf0856200369a565b9050600062001d01878484620036ac565b90508062001d235760405162461bcd60e51b815260040162000d4590620052c2565b62001d3187836001620038d4565b50505050505050565b6000620013658383600062003371565b6001600160a01b0380821660009081526009602052604090205482911662001d865760405162461bcd60e51b815260040162000d4590620052fc565b62001d948233600062002e53565b5050565b6001600160a01b038082166000908152600960205260409020548291168062001dd55760405162461bcd60e51b815260040162000d4590620052fc565b336001600160a01b0316816001600160a01b031663481c6a756040518163ffffffff1660e01b815260040160206040518083038186803b15801562001e1957600080fd5b505afa15801562001e2e573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019062001e54919062004dfc565b6001600160a01b03161462001e7d5760405162461bcd60e51b815260040162000d4590620052df565b6001600160a01b0383166000908152600b602052604090206002015460ff16158062001eae575062001eae620014c2565b62001ecd5760405162461bcd60e51b815260040162000d4590620052c2565b6200102883600162003ae8565b6008818154811062001eeb57600080fd5b6000918252602090912001546001600160a01b0316905081565b60005461010090046001600160a01b0316331462001f375760405162461bcd60e51b815260040162000d4590620052df565b600180546001600160a01b0319166001600160a01b0383169081179091556040517faefcaa6215f99fe8c2f605dd268ee4d23a5b596bbca026e25ce8446187f4f1ba90600090a250565b6060600780548060200260200160405190810160405280929190818152602001828054801562001fdb57602002820191906000526020600020905b81546001600160a01b0316815260019091019060200180831162001fbc575b5050505050905090565b60005460ff166200201f5760405162461bcd60e51b8152602060048201526003602482015262229a1960e91b604482015260640162000d45565b6001600160a01b0380861660009081526009602052604090205486911615620020715760405162461bcd60e51b815260206004820152600360248201526245303760e81b604482015260640162000d45565b4315620020a75760405162461bcd60e51b815260206004820152600360248201526245313360e81b604482015260640162000d45565b60008311620020df5760405162461bcd60e51b8152602060048201526003602482015262114c4d60ea1b604482015260640162000d45565b6000620020ec846200369a565b90506000620021078260105462003c3790919063ffffffff16565b90506000620021246014546200211d846200369a565b9062003c37565b9050804710156200215e5760405162461bcd60e51b815260206004820152600360248201526245313560e81b604482015260640162000d45565b600089898986896001604051620021759062004d85565b6200218696959493929190620051b8565b604051809103906000f080158015620021a3573d6000803e3d6000fd5b506008805460018082019092557ff3f7a9fe364faab93b216da50a3214154f22a0a2b415b23a84c8169e8b636ee30180546001600160a01b03199081166001600160a01b038f811691821790935560008181526009602090815260408083208054909516958816959095179093558351606080820186528b82528185018381528287018d8152858552600a87528785209351845590518389015551600292830155855190810186528b8152808501838152818701888152948452600b90955294822094518555925194840194909455519101805460ff19169115159190911790556010805492935086929091906200229d90849062005353565b90915550620022b09050600c8262003c80565b601b54604051631dfeb85f60e01b81526001600160a01b038c81166004830152602482018a905290911690631dfeb85f90604401600060405180830381600087803b158015620022ff57600080fd5b505af115801562002314573d6000803e3d6000fd5b5050505050505050505050505050565b601e818154811062001eeb57600080fd5b606060ff82166200234557601591505b600d5460ff600160a01b909104811690831611156200236e57600d54600160a01b900460ff1691505b60008260ff1667ffffffffffffffff8111156200239b57634e487b7160e01b600052604160045260246000fd5b604051908082528060200260200182016040528015620023c5578160200160208202803683370190505b50600c549091506001600160a01b031660005b8460ff168160ff161015620024c657816001600160a01b0316633a5381b56040518163ffffffff1660e01b815260040160206040518083038186803b1580156200242157600080fd5b505afa15801562002436573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906200245c919062004dfc565b838260ff16815181106200248057634e487b7160e01b600052603260045260246000fd5b6001600160a01b039283166020918202929092018101919091529281166000908152600f9093526040909220549091169080620024bd8162005419565b915050620023d8565b50909392505050565b6001600160a01b0380851660009081526009602052604090205485911615620025215760405162461bcd60e51b815260206004820152600360248201526245303760e81b604482015260640162000d45565b600034156200253857620025353462004295565b90505b600062002545826200369a565b60035490915060ff16156200259857652d79883d2000811015620025925760405162461bcd60e51b815260206004820152600360248201526204532360ec1b604482015260640162000d45565b620025df565b60005461010090046001600160a01b03163314620025df5760405162461bcd60e51b815260206004820152600360248201526245323160e81b604482015260640162000d45565b6000652d79883d20008210620025f3575060015b6000888888858986604051620026099062004d85565b6200261a96959493929190620051b8565b604051809103906000f08015801562002637573d6000803e3d6000fd5b5060088054600181019091557ff3f7a9fe364faab93b216da50a3214154f22a0a2b415b23a84c8169e8b636ee30180546001600160a01b03199081166001600160a01b038d8116918217909355600090815260096020526040902080549091169183169190911790559050620026ac62004331565b601254600090620026be908562003548565b9050604051806060016040528085815260200182815260200185815250600a60008c6001600160a01b03166001600160a01b03168152602001908152602001600020600082015181600001556020820151816001015560408201518160020155905050836010600082825462002735919062005353565b90915550600190508360038111156200275e57634e487b7160e01b600052602160045260246000fd5b1415620027725762002772600c8362003c80565b886001600160a01b03168a6001600160a01b03167fa89c42d28da99880ab0a25764963efb2991ebf2e19b963718698ecc33c1ee6028a8787604051620027bb9392919062005336565b60405180910390a384156200283357601b54604051631dfeb85f60e01b81526001600160a01b038c811660048301526024820188905290911690631dfeb85f90604401600060405180830381600087803b1580156200281957600080fd5b505af11580156200282e573d6000803e3d6000fd5b505050505b896001600160a01b031660008051602062008130833981519152856010546200285d9190620053a7565b6010546040805192835260208301919091520160405180910390a250505050505050505050565b6001600160a01b03808216600090815260096020526040902054829116620028c05760405162461bcd60e51b815260040162000d4590620052fc565b62001d9482600062003ae8565b6001600160a01b03808316600090815260096020526040902054839116620029095760405162461bcd60e51b815260040162000d4590620052fc565b620010288362002919846200369a565b6000620038d4565b334114620029435760405162461bcd60e51b815260040162000d459062005319565b6001600160a01b038082166000908152600960205260409020548291166200297f5760405162461bcd60e51b815260040162000d4590620052fc565b436000908152601760209081526040808320600380855292529091205460ff1615620029bf5760405162461bcd60e51b815260040162000d4590620052a5565b436000908152601760205260408120600191836004811115620029f257634e487b7160e01b600052602160045260246000fd5b600481111562002a1257634e487b7160e01b600052602160045260246000fd5b815260208082019290925260409081016000908120805460ff1916941515949094179093556001600160a01b0386168352601d90915290206002015460ff1662002ac457601e80546001600160a01b0385166000818152601d6020526040812060018082018590558085019095557f50bb669a95c7b50b7e8a6f09454034b2b14cf2b85c730dca9a539ca82cb6e35090930180546001600160a01b0319168317905552600201805460ff191690911790555b6001600160a01b0383166000908152601d6020526040812080549162002aea83620053fb565b90915550506001600160a01b0383166000908152601d602052604090205462002b16906030906200543c565b62002b425762002b2883600162002cbd565b6001600160a01b0383166000908152601d60205260408120555b826001600160a01b03167f958c4e419432304eb5d6a49f6d489079229a221430ab45c481a51bcf90a5b78c4260405162002b7e91815260200190565b60405180910390a2505050565b33411462002bad5760405162461bcd60e51b815260040162000d459062005319565b436000908152601760209081526040808320600280855292529091205460ff161562002bed5760405162461bcd60e51b815260040162000d4590620052a5565b43600090815260176020526040812060019183600481111562002c2057634e487b7160e01b600052602160045260246000fd5b600481111562002c4057634e487b7160e01b600052602160045260246000fd5b81526020810191909152604001600020805460ff191691151591909117905560155462002c6e90436200543c565b1562002ca35760405162461bcd60e51b815260206004820152600360248201526245313960e81b604482015260640162000d45565b816011541462001d945762002cb762004331565b50601155565b6001600160a01b038083166000908152600960205260408120549091169062002ce6846200438a565b6001600160a01b0385166000908152600a6020526040812060028101549293509162002d1c906103e89062001ab2908862003548565b8254909150819081111562002d2f575081545b8083600001600082825462002d459190620053a7565b9091555050601254835462002d5a9162003548565b8360010181905550806010600082825462002d769190620053a7565b925050819055508183600201600082825462002d939190620053a7565b92505081905550866001600160a01b0316600080516020620081308339815191528260105462002dc4919062005353565b6010546040805192835260208301919091520160405180910390a2604051631c04cebf60e01b8152600481018790526001600160a01b03861690631c04cebf9086906024016000604051808303818588803b15801562002e2357600080fd5b505af115801562002e38573d6000803e3d6000fd5b505050505062001d3185600c6200440b90919063ffffffff16565b600062002e603462004295565b9050600062002e6f856200438a565b6001600160a01b038087166000908152600960205260408120549293509116908062002e9b856200369a565b9050851562002f2c5760405163eb4f16b560e01b8152600481018290526001600160a01b0384169063eb4f16b59086906024016020604051808303818588803b15801562002ee857600080fd5b505af115801562002efd573d6000803e3d6000fd5b50505050506040513d601f19601f8201168201806040525081019062002f249190620050ea565b915062002fb7565b60405163c72e33f560e01b8152600481018290526001600160a01b03888116602483015284169063c72e33f59086906044016020604051808303818588803b15801562002f7857600080fd5b505af115801562002f8d573d6000803e3d6000fd5b50505050506040513d601f19601f8201168201806040525081019062002fb49190620050ea565b91505b6001600160a01b0388166000908152600a6020526040812080549091839183919062002fe590849062005353565b925050819055508181600201600082825462003002919062005353565b9091555050805460125462003018919062005385565b8160010181905550816010600082825462003034919062005353565b90915550620030469050848462004612565b601b54604051631dfeb85f60e01b81526001600160a01b038a811660048301526024820189905290911690631dfeb85f90604401600060405180830381600087803b1580156200309557600080fd5b505af1158015620030aa573d6000803e3d6000fd5b50505050886001600160a01b03166000805160206200813083398151915283601054620030d89190620053a7565b6010546040805192835260208301919091520160405180910390a2505050505050505050565b60006200310b836200438a565b6001600160a01b0384166000908152600a6020526040902080546012549293509091620031389162003548565b60018201556001600160a01b0380851660009081526009602052604081205490911690338515620031ec5760405163275a68dd60e11b81526001600160a01b038281166004830152841690634eb4d1ba9087906024016020604051808303818588803b158015620031a857600080fd5b505af1158015620031bd573d6000803e3d6000fd5b50505050506040513d601f19601f82011682018060405250810190620031e4919062005135565b915062003298565b6040516315dd2d5560e01b81526001600160a01b038281166004830152600091908516906315dd2d5590889060240160408051808303818588803b1580156200323457600080fd5b505af115801562003249573d6000803e3d6000fd5b50505050506040513d601f19601f820116820180604052508101906200327091906200514e565b9093509050801562003296578060106000828254620032909190620053a7565b90915550505b505b811562003334576001600160a01b0387166000908152600a602052604081206002018054849290620032cc908490620053a7565b9091555060009050620032df836200369a565b9050620032ed8282620035d5565b60405181815233906001600160a01b038a16907fb7c918e0e249f999e965cafeb6c664271b3f4317d296461500e71da39f0cbda39060200160405180910390a35062001d31565b6040516001600160a01b038816907f8d582b00f475c8e1026abf1c7f8c3c4e81e4874ff58fabfca37eb222735d0c0d90600090a250505050505050565b6001600160a01b038381166000908152600960205260408120549091166200339c5750600062003541565b600060135443620033ae9190620053a7565b6012549091508115620033e95760105482601154620033ce919062005385565b620033da91906200536e565b620033e6908262005353565b90505b6001600160a01b0386166000908152600a60209081526040808320815160608101835281548082526001830154948201859052600290920154928101929092529092919062003439908562005385565b620034459190620053a7565b90506014548111156200345757506014545b6001600160a01b038089166000908152600960205260409020541686156200350b576040516347a4ea2b60e01b8152600481018390526001600160a01b0389811660248301528216906347a4ea2b906044015b60206040518083038186803b158015620034c357600080fd5b505afa158015620034d8573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190620034fe919062005135565b9550505050505062003541565b604051635e84ae4f60e11b8152600481018390526001600160a01b03898116602483015282169063bd095c9e90604401620034aa565b9392505050565b600082620035595750600062001368565b600062003567838562005385565b9050826200357685836200536e565b14620013655760405162461bcd60e51b81526020600482015260036024820152624d303360e81b604482015260640162000d45565b600062001365838360405180604001604052806003815260200162134c0d60ea1b815250620046b7565b804710156200360d5760405162461bcd60e51b8152602060048201526003602482015262114c0d60ea1b604482015260640162000d45565b6000826001600160a01b03168260405160006040518083038185875af1925050503d80600081146200365c576040519150601f19603f3d011682016040523d82523d6000602084013e62003661565b606091505b5050905080620010285760405162461bcd60e51b815260206004820152600360248201526245303560e81b604482015260640162000d45565b60006200136882633b9aca0062003548565b6000826040015115620038ca57600454421015620036cd5750600062003541565b6020830151600090620036e1908462003c37565b8451909150811115620036f957600091505062003541565b600554156200383957600060055460045442620037179190620053a7565b6200372391906200536e565b905060006200374760065462001ab28489600001516200354890919063ffffffff16565b90506006548210620037d057600060408781018281526020808a018781526001600160a01b038c16808652600b9092528385208b5181559051600182015591516002909201805460ff191692151592909217909155905190917fc484462ff1beade69379ba04c4af2d90b5c8482405682a8fda61ac09fdc1c40d91a26001935050505062003541565b8083116200382c57505060208481019182526001600160a01b0386166000908152600b909152604090819020855181559151600180840191909155908501516002909201805460ff191692151592909217909155905062003541565b6000935050505062003541565b600060408501526020840180518491906200385690839062005353565b9052506001600160a01b0385166000818152600b6020908152604080832088518155918801516001830155878101516002909201805460ff191692151592909217909155517fc484462ff1beade69379ba04c4af2d90b5c8482405682a8fda61ac09fdc1c40d9190a2600191505062003541565b5060019392505050565b600082116200390c5760405162461bcd60e51b815260206004820152600360248201526245323360e81b604482015260640162000d45565b6001600160a01b0383166000908152600a60209081526040918290208251606081018452815480825260018301549382019390935260029091015492810192909252831115620039855760405162461bcd60e51b8152602060048201526003602482015262114c8d60ea1b604482015260640162000d45565b600062003992856200438a565b6001600160a01b0380871660009081526009602052604081205492935091169033851562003a45576040516302e0656960e41b8152600481018890526001600160a01b03841690632e0656909086906024016020604051808303818588803b158015620039fe57600080fd5b505af115801562003a13573d6000803e3d6000fd5b50505050506040513d601f19601f8201168201806040525081019062003a3a9190620050ea565b915087905062003ace565b60405163f3e54a7360e01b8152600481018890523360248201526001600160a01b0384169063f3e54a739086906044016020604051808303818588803b15801562003a8f57600080fd5b505af115801562003aa4573d6000803e3d6000fd5b50505050506040513d601f19601f8201168201806040525081019062003acb9190620050ea565b91505b62003ade888489858533620046f3565b5050505050505050565b600062003af5836200438a565b6001600160a01b038085166000908152600960205260408120549293509116908033851562003ba357836001600160a01b03166383008f52866040518263ffffffff1660e01b815260040160408051808303818588803b15801562003b5957600080fd5b505af115801562003b6e573d6000803e3d6000fd5b50505050506040513d601f19601f8201168201806040525081019062003b95919062005107565b909350915086905062003c27565b60405163d2a71d3560e01b81523360048201526001600160a01b0385169063d2a71d3590879060240160408051808303818588803b15801562003be557600080fd5b505af115801562003bfa573d6000803e3d6000fd5b50505050506040513d601f19601f8201168201806040525081019062003c21919062005107565b90935091505b62001d31878584868533620046f3565b60008062003c46838562005353565b905083811015620013655760405162461bcd60e51b81526020600482015260036024820152624d303160e81b604482015260640162000d45565b6001820154600160a01b900460ff1662003cf35781546001600160a01b0382166001600160a01b0319918216811784556001840180549092161780825560ff600160a01b9091041690601462003cd68362005419565b91906101000a81548160ff021916908360ff160217905550505050565b81546001600160a01b038281169116141562003d0d575050565b6001600160a01b038082166000908152600284016020526040902054168062003ee157600183018054600160a01b900460ff1690601462003d4e8362005419565b91906101000a81548160ff021916908360ff160217905550508260010160009054906101000a90046001600160a01b03166001600160a01b0316638b0e9f3f6040518163ffffffff1660e01b815260040160206040518083038186803b15801562003db857600080fd5b505afa15801562003dcd573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019062003df3919062005135565b826001600160a01b0316638b0e9f3f6040518163ffffffff1660e01b815260040160206040518083038186803b15801562003e2d57600080fd5b505afa15801562003e42573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019062003e68919062005135565b1162003ecc57506001820180546001600160a01b039283166000818152600286016020908152604080832080549588166001600160a01b03199687161790558554909616825260039096019095529290932080548416831790558054909216179055565b5060018201546001600160a01b031662004089565b806001600160a01b0316638b0e9f3f6040518163ffffffff1660e01b815260040160206040518083038186803b15801562003f1b57600080fd5b505afa15801562003f30573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019062003f56919062005135565b826001600160a01b0316638b0e9f3f6040518163ffffffff1660e01b815260040160206040518083038186803b15801562003f9057600080fd5b505afa15801562003fa5573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019062003fcb919062005135565b1162003fd657505050565b6001600160a01b038083166000818152600386016020526040808220548585168352912080546001600160a01b0319169184169190911790556001850154909116141562004041576001830180546001600160a01b0319166001600160a01b03831617905562004089565b6001600160a01b03808316600090815260028501602081815260408084205460038901835281852054861685529290915290912080546001600160a01b031916919092161790555b6001600160a01b03811615801590620041895750806001600160a01b0316638b0e9f3f6040518163ffffffff1660e01b815260040160206040518083038186803b158015620040d757600080fd5b505afa158015620040ec573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019062004112919062005135565b826001600160a01b0316638b0e9f3f6040518163ffffffff1660e01b815260040160206040518083038186803b1580156200414c57600080fd5b505afa15801562004161573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019062004187919062005135565b115b15620041b2576001600160a01b0390811660009081526002840160205260409020541662004089565b6001600160a01b03811662004223575081546001600160a01b039182166000818152600385016020908152604080832080549587166001600160a01b031996871617905586549095168252600286019052838120805484168317905581815292909220805482169055825416179055565b6001600160a01b0390811660008181526003850160209081526040808320805496861680855282852080549888166001600160a01b0319998a16179055815490961684526002909701909152808220805486168517905585548516841790955591825292902080549091169091179055565b600080620042ac670de0b6b3a7640000846200536e565b90506001811015620042e75760405162461bcd60e51b815260206004820152600360248201526245323560e81b604482015260640162000d45565b82620042fc82670de0b6b3a764000062005385565b14620013685760405162461bcd60e51b815260206004820152600360248201526222991b60e91b604482015260640162000d45565b600060135443620043439190620053a7565b90508015620019bc57601054816011546200435f919062005385565b6200436b91906200536e565b601260008282546200437e919062005353565b90915550504360135550565b60006200439662004331565b6001600160a01b0382166000908152600a6020908152604080832081516060810183528154808252600183015494820185905260029092015492810192909252601254919392620043f6929091620043ef919062003548565b906200483f565b9050620044038162004869565b949350505050565b81546001600160a01b038281169116148015906200444357506001600160a01b03818116600090815260028401602052604090205416155b156200444d575050565b60018201546001600160a01b03828116911614156200449a576001600160a01b0380821660009081526002840160205260409020546001840180546001600160a01b031916919092161790555b81546001600160a01b0382811691161415620044de576001600160a01b03808216600090815260038401602052604090205483546001600160a01b03191691161782555b6001600160a01b0380821660009081526003840160205260409020541680156200453a576001600160a01b038083166000908152600285016020526040808220548484168352912080546001600160a01b031916919092161790555b6001600160a01b03808316600090815260028501602052604090205416801562004596576001600160a01b038084166000908152600386016020526040808220548484168352912080546001600160a01b031916919092161790555b6001600160a01b0383166000908152600285016020908152604080832080546001600160a01b03199081169091556003880190925290912080549091169055600184018054600160a01b900460ff16906014620045f383620053db565b91906101000a81548160ff021916908360ff1602179055505050505050565b60018160038111156200463557634e487b7160e01b600052602160045260246000fd5b1415620046495762001d94600c8362003c80565b60028160038111156200466c57634e487b7160e01b600052602160045260246000fd5b1415620046805762001d94600c83620048ee565b6003816003811115620046a357634e487b7160e01b600052602160045260246000fd5b141562001d945762001d94600c836200440b565b60008183620046db5760405162461bcd60e51b815260040162000d4591906200524f565b506000620046ea84866200536e565b95945050505050565b6001600160a01b0386166000908152600a6020526040812080549091869183919062004721908490620053a7565b9091555050805460125462004737919062005385565b81600101819055508460106000828254620047539190620053a7565b90915550620047659050868562004612565b601b546001600160a01b031663821b3e85848462004788633b9aca008a6200536e565b6040516001600160e01b031960e086901b1681526001600160a01b0393841660048201529290911660248301526044820152606401600060405180830381600087803b158015620047d857600080fd5b505af1158015620047ed573d6000803e3d6000fd5b50505050866001600160a01b031660008051602062008130833981519152866010546200481b919062005353565b6010546040805192835260208301919091520160405180910390a250505050505050565b60006200136583836040518060400160405280600381526020016226981960e91b81525062004ce5565b6000601454600014156200487f57506000919050565b60145482908110620048cf5750601480546000909155604051600181527ffea2322f7ff1da0a9aaf4bdbe1f48d197c176670e395853ad39a1aea895654f19060200160405180910390a162001368565b8260146000828254620048e39190620053a7565b909155505092915050565b6001600160a01b0380821660008181526003850160205260409020546001850154908316921614806200492857506001600160a01b038116155b8062004a1c5750816001600160a01b0316638b0e9f3f6040518163ffffffff1660e01b815260040160206040518083038186803b1580156200496957600080fd5b505afa1580156200497e573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190620049a4919062005135565b816001600160a01b0316638b0e9f3f6040518163ffffffff1660e01b815260040160206040518083038186803b158015620049de57600080fd5b505afa158015620049f3573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019062004a19919062005135565b11155b1562004a2757505050565b6001600160a01b038083166000818152600286016020526040808220548585168352912080546001600160a01b0319169184169190911790558454909116141562004a8b5782546001600160a01b0319166001600160a01b03821617835562004acd565b6001600160a01b0382811660009081526002850160209081526040808320548416835260038701909152902080546001600160a01b0319169183169190911790555b6001600160a01b0381161580159062004bcd5750816001600160a01b0316638b0e9f3f6040518163ffffffff1660e01b815260040160206040518083038186803b15801562004b1b57600080fd5b505afa15801562004b30573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019062004b56919062005135565b816001600160a01b0316638b0e9f3f6040518163ffffffff1660e01b815260040160206040518083038186803b15801562004b9057600080fd5b505afa15801562004ba5573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019062004bcb919062005135565b115b1562004bf6576001600160a01b0390811660009081526003840160205260409020541662004acd565b6001600160a01b03811662004c6d57506001820180546001600160a01b039283166000818152600286016020908152604080832080549588166001600160a01b0319968716179055600390970190528581208054841690558354909416845293909220805483168417905580549091169091179055565b6001600160a01b0390811660008181526002850160208181526040808420805487168552600390980180835281852080546001600160a01b0319908116998916998a17909155848452895489875283872080549190991690821617909755825283208054861685179055929091529052825416179055565b6000818484111562004d0c5760405162461bcd60e51b815260040162000d4591906200524f565b506000620046ea8486620053a7565b82805482825590600052602060002090810192821562004d73579160200282015b8281111562004d7357825182546001600160a01b0319166001600160a01b0390911617825560209092019160019091019062004d3c565b5062004d8192915062004d93565b5090565b612c8480620054ac83390190565b5b8082111562004d81576000815560010162004d94565b803562004db78162005495565b919050565b8035801515811462004db757600080fd5b80516004811062004db757600080fd5b60006020828403121562004def578081fd5b8135620013658162005495565b60006020828403121562004e0e578081fd5b8151620013658162005495565b6000806040838503121562004e2e578081fd5b823562004e3b8162005495565b9150602083013562004e4d8162005495565b809150509250929050565b6000806000806080858703121562004e6e578182fd5b843562004e7b8162005495565b9350602085013562004e8d8162005495565b92506040850135915062004ea46060860162004dbc565b905092959194509250565b600080600080600060a0868803121562004ec7578081fd5b853562004ed48162005495565b9450602086013562004ee68162005495565b9350604086013592506060860135915062004f046080870162004dbc565b90509295509295909350565b6000806040838503121562004f23578182fd5b823562004f308162005495565b946020939093013593505050565b6000806000806000806000806000806101408b8d03121562004f5e578485fd5b8a3562004f6b8162005495565b995060208b0135985060408b0135975060608b0135965060808b0135955060a08b0135945060c08b0135935060e08b013592506101008b013562004faf8162005495565b91506101208b013562004fc28162005495565b809150509295989b9194979a5092959850565b6000602080838503121562004fe8578182fd5b823567ffffffffffffffff8082111562005000578384fd5b818501915085601f83011262005014578384fd5b8135818111156200502957620050296200547f565b8060051b604051601f19603f830116810181811085821117156200505157620050516200547f565b604052828152858101935084860182860187018a101562005070578788fd5b8795505b838610156200509d57620050888162004daa565b85526001959095019493860193860162005074565b5098975050505050505050565b600060208284031215620050bc578081fd5b5035919050565b60008060408385031215620050d6578182fd5b82359150602083013562004e4d8162005495565b600060208284031215620050fc578081fd5b620013658262004dcd565b600080604083850312156200511a578182fd5b620051258362004dcd565b9150602083015190509250929050565b60006020828403121562005147578081fd5b5051919050565b6000806040838503121562005161578182fd5b505080516020909101519092909150565b60006020828403121562005184578081fd5b813560ff8116811462001365578182fd5b60048110620051b457634e487b7160e01b600052602160045260246000fd5b9052565b6001600160a01b038781168252861660208201526040810185905260608101849052821515608082015260c08101620051f560a083018462005195565b979650505050505050565b6020808252825182820181905260009190848201906040850190845b81811015620052435783516001600160a01b0316835292840192918401916001016200521c565b50909695505050505050565b6000602080835283518082850152825b818110156200527d578581018301518582016040015282016200525f565b818111156200528f5783604083870101525b50601f01601f1916929092016040019392505050565b60208082526003908201526222981b60e91b604082015260600190565b60208082526003908201526222991960e91b604082015260600190565b60208082526003908201526222981960e91b604082015260600190565b60208082526003908201526208a60760eb1b604082015260600190565b60208082526003908201526204534360ec1b604082015260600190565b838152602081018390526060810162004403604083018462005195565b6000821982111562005369576200536962005453565b500190565b60008262005380576200538062005469565b500490565b6000816000190483118215151615620053a257620053a262005453565b500290565b600082821015620053bc57620053bc62005453565b500390565b600081620053d357620053d362005453565b506000190190565b600060ff821680620053f157620053f162005453565b6000190192915050565b600060001982141562005412576200541262005453565b5060010190565b600060ff821660ff81141562005433576200543362005453565b60010192915050565b6000826200544e576200544e62005469565b500690565b634e487b7160e01b600052601160045260246000fd5b634e487b7160e01b600052601260045260246000fd5b634e487b7160e01b600052604160045260246000fd5b6001600160a01b0381168114620019bc57600080fdfe60806040523480156200001157600080fd5b5060405162002c8438038062002c848339810160408190526200003491620001f5565b856001600160a01b038116620000775760405162461bcd60e51b815260206004820152600360248201526245303960e81b60448201526064015b60405180910390fd5b856001600160a01b038116620000b65760405162461bcd60e51b815260206004820152600360248201526245303960e81b60448201526064016200006e565b856064811115620000f05760405162461bcd60e51b815260206004820152600360248201526245323760e81b60448201526064016200006e565b665543df729c00008611156200012f5760405162461bcd60e51b815260206004820152600360248201526245323960e81b60448201526064016200006e565b60028054336001600160a01b0319918216179091556003805482166001600160a01b038c811691909117825560008054909316908b161790915560048890556005879055600687905560088790556007805460ff1981168815159081178355879361ffff1990921661ff00199091161790610100908490811115620001c457634e487b7160e01b600052602160045260246000fd5b02179055505050505050505050506200026f565b80516001600160a01b0381168114620001f057600080fd5b919050565b60008060008060008060c087890312156200020e578182fd5b6200021987620001d8565b95506200022960208801620001d8565b94506040870151935060608701519250608087015180151581146200024c578283fd5b60a08801519092506004811062000261578182fd5b809150509295509295509295565b612a05806200027f6000396000f3fe6080604052600436106102935760003560e01c8063820805af1161015a578063c72e33f5116100c1578063ea1466d31161007a578063ea1466d3146107aa578063eb4f16b5146107d4578063ec9df9f6146107e7578063f28e5f6114610550578063f3e54a73146107fd578063f851a4401461081057600080fd5b8063c72e33f51461072a578063c967f90f1461073d578063d2957b2f14610764578063d2a71d3514610779578063e18b7fcf1461078c578063e1d517851461079457600080fd5b80638f283970116101135780638f283970146106a057806398c2199d146106c0578063a9590889146106d5578063b9373707146105ac578063bd095c9e146106eb578063c19d93fb1461070b57600080fd5b8063820805af146105ac57806383008f52146105c657806386ccb407146105dc5780638b0e9f3f146105f25780638d23fc61146106085780638da5cb5b1461068057600080fd5b80632b8aba7a116101fe5780634eb4d1ba116101b75780634eb4d1ba1461051d578063507ae5e7146105305780635a651019146105505780635ea1d6f81461056557806362cb3e501461057b5780637977f9811461059157600080fd5b80632b8aba7a146104265780632e0656901461043c5780633a5381b51461045c57806347a4ea2b1461047c578063481c6a751461049c5780634bb1646c146104ba57600080fd5b80631927207f116102505780631927207f146103835780631c04cebf14610399578063213a4894146103ac5780632337fa08146103c3578063237a1f2e146103d857806326782247146103ee57600080fd5b8063023455651461029857806302858725146102c0578063073d2eb4146103175780630e18b6811461032d57806315dd2d551461034457806315de360e1461036c575b600080fd5b3480156102a457600080fd5b506102ad603081565b6040519081526020015b60405180910390f35b3480156102cc57600080fd5b506102fc6102db36600461276f565b60136020526000908152604090208054600182015460029092015490919083565b604080519384526020840192909252908201526060016102b7565b34801561032357600080fd5b506102ad600a5481565b34801561033957600080fd5b50610342610830565b005b61035761035236600461276f565b6108d9565b604080519283526020830191909152016102b7565b34801561037857600080fd5b506102ad6201518081565b34801561038f57600080fd5b506102ad6103e881565b6103426103a73660046127b6565b610a9d565b3480156103b857600080fd5b506102ad621baf8081565b3480156103cf57600080fd5b506011546102ad565b3480156103e457600080fd5b506102ad60105481565b3480156103fa57600080fd5b5060015461040e906001600160a01b031681565b6040516001600160a01b0390911681526020016102b7565b34801561043257600080fd5b506102ad600f5481565b61044f61044a3660046127b6565b610c4e565b6040516102b791906127fd565b34801561046857600080fd5b5060035461040e906001600160a01b031681565b34801561048857600080fd5b506102ad6104973660046127ce565b610d66565b3480156104a857600080fd5b506000546001600160a01b031661040e565b3480156104c657600080fd5b506103576104d536600461278b565b6001600160a01b039190911660009081526013602090815260408083209383526003909301815290829020825180840190935280548084526001909101549290910182905291565b6102ad61052b36600461276f565b610e51565b34801561053c57600080fd5b5061040e61054b3660046127b6565b610f8a565b34801561055c57600080fd5b506102ad600181565b34801561057157600080fd5b506102ad60045481565b34801561058757600080fd5b506102ad60055481565b34801561059d57600080fd5b506102ad665543df729c000081565b3480156105b857600080fd5b506102ad652d79883d200081565b6105ce610fb4565b6040516102b7929190612810565b3480156105e857600080fd5b506102ad60085481565b3480156105fe57600080fd5b506102ad60065481565b34801561061457600080fd5b5061065661062336600461276f565b6012602052600090815260409020805460018201546002830154600384015460049094015460ff90931693919290919085565b6040805195151586526020860194909452928401919091526060830152608082015260a0016102b7565b34801561068c57600080fd5b5060025461040e906001600160a01b031681565b3480156106ac57600080fd5b506103426106bb36600461276f565b61114b565b3480156106cc57600080fd5b506102ad600a81565b3480156106e157600080fd5b506102ad600e5481565b3480156106f757600080fd5b506102ad6107063660046127ce565b6111d5565b34801561071757600080fd5b5060075461044f90610100900460ff1681565b61044f6107383660046127ce565b611348565b34801561074957600080fd5b50610752601581565b60405160ff90911681526020016102b7565b34801561077057600080fd5b506102ad600281565b6105ce61078736600461276f565b611522565b610342611629565b3480156107a057600080fd5b506102ad60095481565b3480156107b657600080fd5b506007546107c49060ff1681565b60405190151581526020016102b7565b61044f6107e23660046127b6565b61166c565b3480156107f357600080fd5b506102ad600d5481565b61044f61080b3660046127ce565b611767565b34801561081c57600080fd5b5060005461040e906001600160a01b031681565b6001546001600160a01b031633146108755760405162461bcd60e51b815260206004820152600360248201526245303360e81b60448201526064015b60405180910390fd5b600154600080546040516001600160a01b0393841693909116917f7e644d79422f17c01e4894b5f4f588d331ebfa28653d42ae832dc59e38c9798f91a360018054600080546001600160a01b03199081166001600160a01b03841617909155169055565b60025460009081906001600160a01b031633146109085760405162461bcd60e51b815260040161086c906128a0565b610911836117d7565b610919611861565b6001600160a01b0383166000908152601260205260408120600381015460028201546001830154600a54939493610966939261096092909161095a91611927565b90611982565b906119c7565b90506109818260010154600a5461192790919063ffffffff16565b60038301556000600283015580156109e25761099d85826119ef565b6003546040518281526001600160a01b038781169216907fd01566b65da2d62cb66f3844588c99d9a95b38394ccdc9c3f7604536e653cf1b9060200160405180910390a35b60006109ed86611aae565b90506109f981866128da565b94506003600754610100900460ff166003811115610a2757634e487b7160e01b600052602160045260246000fd5b148015610a36575042600e5411155b15610a7e576001830154610a4a90866128da565b9450826001015460066000828254610a629190612931565b9091555050600183018054600091829055600385019190915593505b8460086000828254610a909190612931565b9091555050505050915091565b6002546001600160a01b03163314610ac75760405162461bcd60e51b815260040161086c906128a0565b610acf611861565b6000610af26103e8610aec8460085461192790919063ffffffff16565b90611bd0565b90508060065410610b1a578060066000828254610b0f9190612931565b90915550610b209050565b60006006555b6003546001600160a01b0316600090815260136020526040812060020154600554610b4a91611982565b90506000610b5e6103e8610aec8487611927565b90508060055410610b86578060056000828254610b7b9190612931565b90915550610bb69050565b600060055482610b969190612931565b6000600555600354909150610bb4906001600160a01b031682611bf8565b505b8260086000828254610bc89190612931565b925050819055508360106000828254610be191906128da565b909155505043600f556007805461020061ff00198216179182905560035460405160ff6101009384900481169441946001600160a01b03909416936000805160206129b083398151915293610c3f9388939290920490911690612827565b60405180910390a35050505050565b6002546000906001600160a01b03163314610c7b5760405162461bcd60e51b815260040161086c906128a0565b610c83611d63565b1515600114610ca45760405162461bcd60e51b815260040161086c906128bd565b610cb482652d79883d2000611982565b6005541015610ceb5760405162461bcd60e51b815260206004820152600360248201526245333160e81b604482015260640161086c565b610cf3611861565b600a54610d009083612912565b600b6000828254610d1191906128da565b925050819055508160056000828254610d2a9190612931565b909155505060008054610d479084906001600160a01b0316611e1f565b600354909150610d60906001600160a01b03168461201b565b92915050565b6002546000906001600160a01b03163314610d935760405162461bcd60e51b815260040161086c906128a0565b600a5460065460009015610dec576000610dbd6064610aec6004548961192790919063ffffffff16565b90506000610dcb8288612931565b905060065481610ddb91906128f2565b9250610de78484611982565b935050505b6000546001600160a01b0385811691161415610e3e576000610e28610e1f60065484610e189190612912565b88906119c7565b60095490611982565b9050610e3481846120a0565b9350505050610d60565b610e48828561217e565b95945050505050565b6002546000906001600160a01b03163314610e7e5760405162461bcd60e51b815260040161086c906128a0565b610e86611861565b6000610eab600c54610960600b5461095a600554600a5461192790919063ffffffff16565b9050610ec4600554600a5461192790919063ffffffff16565b600c556000600b819055600d54600954610ee4919061095a908590611982565b60006009819055600d5590508015610f4557610f0084826119ef565b6003546040518281526001600160a01b038681169216907fd01566b65da2d62cb66f3844588c99d9a95b38394ccdc9c3f7604536e653cf1b9060200160405180910390a35b600354600090610f5d906001600160a01b0316611aae565b9050610f6981856128da565b93508360086000828254610f7d9190612931565b9091555050505050919050565b60118181548110610f9a57600080fd5b6000918252602090912001546001600160a01b0316905081565b60025460009081906001600160a01b03163314610fe35760405162461bcd60e51b815260040161086c906128a0565b6003600754610100900460ff16600381111561100f57634e487b7160e01b600052602160045260246000fd5b14156110435760405162461bcd60e51b815260206004820152600360248201526222999960e91b604482015260640161086c565b6007805461ff0019811661030017909155610100900460ff16611069621baf80426128da565b600e55611074611861565b6000600182600381111561109857634e487b7160e01b600052602160045260246000fd5b14156110a2575060035b600a546005546110b29190612912565b600b60008282546110c391906128da565b9091555050600554600680546000906110dd908490612931565b90915550506003546005546110fb916001600160a01b03169061201b565b600580546000918290559054600380546040516001600160a01b0393841693909116916000805160206129b083398151915291611139918891612827565b60405180910390a39093509150509091565b6000546001600160a01b0316331461118b5760405162461bcd60e51b815260206004820152600360248201526222981960e91b604482015260640161086c565b600180546001600160a01b0319166001600160a01b0383169081179091556040517faefcaa6215f99fe8c2f605dd268ee4d23a5b596bbca026e25ce8446187f4f1ba90600090a250565b6002546000906001600160a01b031633146112025760405162461bcd60e51b815260040161086c906128a0565b600a546006546000901561125b57600061122c6064610aec6004548961192790919063ffffffff16565b9050600061123a8288612931565b90506006548161124a91906128f2565b92506112568484611982565b935050505b600080546001600160a01b03868116911614156112ce57600061128f610e1f600654856112889190612912565b89906119c7565b90506112b2600c54610960600b5461095a6005548961192790919063ffffffff16565b600d549092506112c69061095a8484611982565b915050610e48565b6001600160a01b038516600090815260126020908152604091829020825160a081018452815460ff16151581526001820154928101839052600282015493810184905260038201546060820181905260049092015460808201529261133d92610960919061095a908990611927565b979650505050505050565b6002546000906001600160a01b031633146113755760405162461bcd60e51b815260040161086c906128a0565b61137d611d63565b151560011461139e5760405162461bcd60e51b815260040161086c906128bd565b60075460ff166113d65760405162461bcd60e51b815260206004820152600360248201526245333360e81b604482015260640161086c565b600654665543df729c0000906113ec9085611982565b11156114205760405162461bcd60e51b815260206004820152600360248201526245323960e81b604482015260640161086c565b6001600160a01b03821660009081526012602052604090205460ff166114a6576001600160a01b0382166000818152601260205260408120805460ff191660019081179091556011805491820181559091527f31ecc21a745e3968a04e9570e4425bc18fa8019c68028196b546d1669c200c680180546001600160a01b03191690911790555b6114af826117d7565b6114b7611861565b6001600160a01b0382166000908152601260205260409020600a546114dc9085612912565b8160030160008282546114ef91906128da565b925050819055508381600101600082825461150a91906128da565b9091555061151a9050848461230f565b949350505050565b60025460009081906001600160a01b031633146115515760405162461bcd60e51b815260040161086c906128a0565b611559611d63565b151560011461157a5760405162461bcd60e51b815260040161086c906128bd565b6001600160a01b038316600090815260126020908152604091829020825160a081018452815460ff16151581526001820154928101839052600282015493810193909352600381015460608401526004015460808301526116035760405162461bcd60e51b8152602060048201526003602482015262114ccd60ea1b604482015260640161086c565b61160c846117d7565b6020810151600061161d82876124bc565b94509092505050915091565b6002546001600160a01b031633146116535760405162461bcd60e51b815260040161086c906128a0565b34600d600082825461166591906128da565b9091555050565b6002546000906001600160a01b031633146116995760405162461bcd60e51b815260040161086c906128a0565b6116a1611d63565b15156001146116c25760405162461bcd60e51b815260040161086c906128bd565b600654665543df729c0000906116d89084611982565b111561170c5760405162461bcd60e51b815260206004820152600360248201526245323960e81b604482015260640161086c565b611714611861565b600a546117219083612912565b600c600082825461173291906128da565b92505081905550816005600082825461174b91906128da565b9091555050600054610d609083906001600160a01b031661230f565b6002546000906001600160a01b031633146117945760405162461bcd60e51b815260040161086c906128a0565b61179c611d63565b15156001146117bd5760405162461bcd60e51b815260040161086c906128bd565b6117c6826117d7565b6117d083836124bc565b9392505050565b60006117e28261256d565b6001600160a01b03831660009081526012602052604090206010546004820155909150811561185c5781816001015410611835578181600101600082825461182a9190612931565b9091555061185c9050565b60008160010154836118479190612931565b60006001840155905061185a8482611bf8565b505b505050565b34156119255760006006541161189f5760405162461bcd60e51b815260206004820152600360248201526245333560e81b604482015260640161086c565b60006118bb6064610aec6004543461192790919063ffffffff16565b905060006118c98234612931565b90506000600654826118db91906128f2565b905080600a60008282546118ef91906128da565b90915550506006546119019082612912565b61190b9034612931565b6009600082825461191c91906128da565b90915550505050505b565b60008261193657506000610d60565b60006119428385612912565b90508261194f85836128f2565b146117d05760405162461bcd60e51b81526020600482015260036024820152624d303360e81b604482015260640161086c565b60008061198f83856128da565b9050838110156117d05760405162461bcd60e51b81526020600482015260036024820152624d303160e81b604482015260640161086c565b60006117d083836040518060400160405280600381526020016226981960e91b815250612675565b80471015611a255760405162461bcd60e51b8152602060048201526003602482015262114c0d60ea1b604482015260640161086c565b6000826001600160a01b03168260405160006040518083038185875af1925050503d8060008114611a72576040519150601f19603f3d011682016040523d82523d6000602084013e611a77565b606091505b505090508061185c5760405162461bcd60e51b815260206004820152600360248201526245303560e81b604482015260640161086c565b6001600160a01b0381166000908152601360205260408120805460018201548392911115611bc95760018101545b8154811015611b70576000818152600383016020908152604091829020825180840190935280548352600101549082018190524210611b57578051611b2190856128da565b6000838152600385016020526040812081815560019081018290558501805492965090611b4d83612948565b9190505550611b5d565b50611b70565b5080611b6881612948565b915050611adc565b50805460018201541415611ba9576001600160a01b03841660009081526013602052604081208181556001810182905560020155611bc9565b8115611bc95781816002016000828254611bc39190612931565b90915550505b5092915050565b60006117d0838360405180604001604052806003815260200162134c0d60ea1b8152506126a6565b6001600160a01b03821660009081526013602052604090206002810154829190821115611c4d5760405162461bcd60e51b815260206004820152600360248201526204533360ec1b604482015260640161086c565b60018101545b8154811015611d0b576000818152600383016020526040902080548411611cbb5783816000016000828254611c889190612931565b9091555050805460009450611cb557600060018083018290558401805491611caf83612948565b91905055505b50611d0b565b8054611cc79085612931565b6000838152600385016020526040812081815560019081018290558501805492965090611cf383612948565b91905055505080611d0381612948565b915050611c53565b50805460018201541415611d44576001600160a01b0384166000908152601360205260408120818155600181018290556002015561185a565b82816002016000828254611d589190612931565b909155505050505050565b600080600754610100900460ff166003811115611d9057634e487b7160e01b600052602160045260246000fd5b1480611dc557506001600754610100900460ff166003811115611dc357634e487b7160e01b600052602160045260246000fd5b145b80611e1a57506002600754610100900460ff166003811115611df757634e487b7160e01b600052602160045260246000fd5b148015611e1a575062015180611e18600f54436119c790919063ffffffff16565b115b905090565b60008260066000828254611e339190612931565b90915550600090506001600754610100900460ff166003811115611e6757634e487b7160e01b600052602160045260246000fd5b1415611ed857652d79883d20006006541015611ed4576003546007546040516001600160a01b038681169316916000805160206129b083398151915291611eb991610100900460ff1690600090612827565b60405180910390a3506007805461ff00191690556003611ed8565b5060025b6002600754610100900460ff166003811115611f0457634e487b7160e01b600052602160045260246000fd5b1415611fd757652d79883d20006006541080611f275750652d79883d2000600554105b15611f80576003546007546040516001600160a01b038681169316916000805160206129b083398151915291611f6891610100900460ff1690600090612827565b60405180910390a36007805461ff0019169055611fd7565b6003546007546040516001600160a01b038681169316916000805160206129b083398151915291611fbc91610100900460ff1690600190612827565b60405180910390a3506007805461ff00191661010017905560015b6006546003546040516001600160a01b038087169216907f6ed333cce6c087c78e438d4efc04f8896d69bb75d08206a96869dd0b82ff420f90600090a49392505050565b6001600160a01b038216600090815260136020908152604091829020825180840190935283835291908101612053621baf80426128da565b9052815460009081526003830160209081526040822083518155920151600190920191909155815490829061208783612948565b91905055508181600201600082825461191c91906128da565b6000806120c4600c54610960600b5461095a6005548861192790919063ffffffff16565b600d549091506120d89061095a8387611982565b60035490915060009081906120f5906001600160a01b03166126d4565b905061210181836128da565b91506003600754610100900460ff16600381111561212f57634e487b7160e01b600052602160045260246000fd5b14801561213e575042600e5411155b156121535760055461215090836128da565b91505b81156121745761216782633b9aca00611927565b61217190846128da565b92505b5090949350505050565b6001600160a01b0381166000908152601260209081526040808320815160a081018352815460ff161515815260018201549381019390935260028101549183019190915260038101546060830152600401546080820152816121df8461256d565b905060008115612227578183602001511061220e5781836020018181516122069190612931565b905250612227565b602083015161221d9083612931565b6000602085015290505b60006122508460600151610960866040015161095a88602001518c61192790919063ffffffff16565b905060008061225e886126d4565b90508315612283578084111561227657506000612283565b6122808482612931565b90505b61228d81836128da565b91506003600754610100900460ff1660038111156122bb57634e487b7160e01b600052602160045260246000fd5b1480156122ca575042600e5411155b156122e15760208601516122de90836128da565b91505b8115612302576122f582633b9aca00611927565b6122ff90846128da565b92505b5090979650505050505050565b6000826006600082825461232391906128da565b92505081905550826008600082825461233c91906128da565b925050819055506000652d79883d2000600654101580156123655750652d79883d200060055410155b156123f7576001600754610100900460ff16600381111561239657634e487b7160e01b600052602160045260246000fd5b146123ef576003546007546040516001600160a01b038681169316916000805160206129b0833981519152916123d791610100900460ff1690600190612827565b60405180910390a36007805461ff0019166101001790555b506001611fd7565b6002600754610100900460ff16600381111561242357634e487b7160e01b600052602160045260246000fd5b1415611fd7576003546007546040516001600160a01b038681169316916000805160206129b08339815191529161246591610100900460ff1690600090612827565b60405180910390a36007805461ff00191690556006546003546040516001600160a01b038681169216907f6ed333cce6c087c78e438d4efc04f8896d69bb75d08206a96869dd0b82ff420f90600090a49392505050565b6001600160a01b0381166000908152601260205260408120600181015484111561250e5760405162461bcd60e51b8152602060048201526003602482015262114c8d60ea1b604482015260640161086c565b612516611861565b600a546125239085612912565b81600201600082825461253691906128da565b92505081905550838160010160008282546125519190612931565b909155506125619050838561201b565b6000610e488585611e1f565b60006010546000141561258257506000919050565b6001600160a01b038216600090815260126020908152604091829020825160a081018452815460ff1615158152600182015492810192909252600281015492820192909252600382015460608201526004909101546080820181905260105414156125f05750600092915050565b600061260b82608001516010546119c790919063ffffffff16565b6001600160a01b038516600090815260136020908152604082206002015490850151929350909115158061263f5750600081115b1561266c5760208401516000906126569083611982565b90506126686103e8610aec8387611927565b9250505b50949350505050565b600081848411156126995760405162461bcd60e51b815260040161086c919061284d565b506000610e488486612931565b600081836126c75760405162461bcd60e51b815260040161086c919061284d565b506000610e4884866128f2565b6001600160a01b0381166000908152601360205260408120805460018201548392911115611bc95760018101545b815481101561276757600081815260038301602090815260409182902082518084019093528054835260010154908201819052421061274e57805161274790856128da565b9350612754565b50612767565b508061275f81612948565b915050612702565b505092915050565b600060208284031215612780578081fd5b81356117d08161299a565b6000806040838503121561279d578081fd5b82356127a88161299a565b946020939093013593505050565b6000602082840312156127c7578081fd5b5035919050565b600080604083850312156127e0578182fd5b8235915060208301356127f28161299a565b809150509250929050565b6020810161280a83612979565b91905290565b6040810161281d84612979565b9281526020015290565b6040810161283484612979565b83825261284083612979565b8260208301529392505050565b6000602080835283518082850152825b818110156128795785810183015185820160400152820161285d565b8181111561288a5783604083870101525b50601f01601f1916929092016040019392505050565b60208082526003908201526245303160e81b604082015260600190565b60208082526003908201526208a64760eb1b604082015260600190565b600082198211156128ed576128ed612963565b500190565b60008261290d57634e487b7160e01b81526012600452602481fd5b500490565b600081600019048311821515161561292c5761292c612963565b500290565b60008282101561294357612943612963565b500390565b600060001982141561295c5761295c612963565b5060010190565b634e487b7160e01b600052601160045260246000fd5b6004811061299757634e487b7160e01b600052602160045260246000fd5b50565b6001600160a01b038116811461299757600080fdfe8a8390b4461d0bcdc4b37ac49caa0fdf9bb7c82e483cd569bb0b0d0855b5dcd6a264697066735822122064ff66454cbe8adee9fb59ab8dc44c636c303fcd59867cc8256aa1a89ea82d3d64736f6c634300080400336f541a70b0425dea8a0c0c3185e2d2345a2c7bec5f9830b57684e1d530d477c7a2646970667358221220c4c31004c827e81b587a5ad9e653528ac6f129eb3e99f7bde250d36de2c4ad0a64736f6c63430008040033"

func HardFork1() []IUpgradeAction {
	return []IUpgradeAction{&StakingV1{}}
}

type StakingV1 struct {
}

func (h *StakingV1) GetName() string {
	return "StakingV1"
}

func (s *StakingV1) DoUpdate(state *state.StateDB, header *types.Header, chainContext core.ChainContext, config *params.ChainConfig) (err error) {
	contractCode := common.FromHex(stakingV1Code)
	//write code to sys contract
	state.SetCode(system.StakingContract, contractCode)
	log.Debug("Write code to system contract account", "addr", system.StakingContract.String(), "code", stakingV1Code)
	return
}
